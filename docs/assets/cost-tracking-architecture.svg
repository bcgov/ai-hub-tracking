<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 1000" width="1100" height="1000">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1e3a5f"/>
      <stop offset="100%" style="stop-color:#2d5a87"/>
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="110%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.12"/>
    </filter>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1100" height="950" fill="#f8fafc"/>

  <!-- Header -->
  <rect x="0" y="0" width="1100" height="60" fill="url(#headerGrad)"/>
  <text x="550" y="38" font-family="Segoe UI, Arial" font-size="22" font-weight="bold" fill="white" text-anchor="middle">Project Resource Architecture</text>

  <!-- ==================== SHARED ENTRY POINT ==================== -->
  <rect x="350" y="85" width="400" height="80" rx="8" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
  <text x="550" y="115" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">Shared Entry Point</text>
  <text x="550" y="140" font-family="Segoe UI, Arial" font-size="12" fill="#b45309" text-anchor="middle">APIM | App Gateway | Firewall | VNet</text>
  <rect x="680" y="90" width="60" height="20" rx="3" fill="#f59e0b"/>
  <text x="710" y="104" font-family="Segoe UI, Arial" font-size="9" font-weight="bold" fill="white" text-anchor="middle">SHARED</text>

  <!-- Arrow down to projects -->
  <line x1="550" y1="165" x2="550" y2="195" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- ==================== PROJECT RESOURCE GROUPS ==================== -->
  <text x="550" y="220" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#1e3a5f" text-anchor="middle">Project Resource Groups (Dedicated per Project)</text>

  <!-- Project A -->
  <rect x="50" y="240" width="480" height="200" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>
  <rect x="50" y="240" width="480" height="30" rx="10" fill="#2563eb"/>
  <text x="290" y="260" font-family="Segoe UI, Arial" font-size="13" font-weight="bold" fill="white" text-anchor="middle">rg-health-rag-prod</text>

  <rect x="70" y="285" width="130" height="60" rx="6" fill="white" stroke="#60a5fa"/>
  <text x="135" y="310" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#1e40af" text-anchor="middle">Storage</text>
  <text x="135" y="328" font-family="Segoe UI, Arial" font-size="10" fill="#3b82f6" text-anchor="middle">Documents</text>

  <rect x="220" y="285" width="130" height="60" rx="6" fill="white" stroke="#60a5fa"/>
  <text x="285" y="310" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#1e40af" text-anchor="middle">Search</text>
  <text x="285" y="328" font-family="Segoe UI, Arial" font-size="10" fill="#3b82f6" text-anchor="middle">Indexes</text>

  <rect x="370" y="285" width="130" height="60" rx="6" fill="white" stroke="#60a5fa"/>
  <text x="435" y="310" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#1e40af" text-anchor="middle">Key Vault</text>
  <text x="435" y="328" font-family="Segoe UI, Arial" font-size="10" fill="#3b82f6" text-anchor="middle">Secrets</text>

  <!-- AI Foundry Project A -->
  <rect x="70" y="360" width="430" height="65" rx="6" fill="#f3e8ff" stroke="#7c3aed" stroke-width="2"/>
  <text x="285" y="385" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#6b21a8" text-anchor="middle">AI Foundry Project: health-rag</text>
  <text x="285" y="405" font-family="Segoe UI, Arial" font-size="10" fill="#7c3aed" text-anchor="middle">API endpoint | Prompt Flows | Connections to shared services ↓</text>
  <rect x="420" y="365" width="70" height="18" rx="3" fill="#7c3aed"/>
  <text x="455" y="377" font-family="Segoe UI, Arial" font-size="8" font-weight="bold" fill="white" text-anchor="middle">DEDICATED</text>

  <!-- Project B -->
  <rect x="570" y="240" width="480" height="200" rx="10" fill="#dcfce7" stroke="#22c55e" stroke-width="2" filter="url(#shadow)"/>
  <rect x="570" y="240" width="480" height="30" rx="10" fill="#16a34a"/>
  <text x="810" y="260" font-family="Segoe UI, Arial" font-size="13" font-weight="bold" fill="white" text-anchor="middle">rg-sdpr-chatbot-prod</text>

  <rect x="590" y="285" width="130" height="60" rx="6" fill="white" stroke="#4ade80"/>
  <text x="655" y="310" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">Storage</text>
  <text x="655" y="328" font-family="Segoe UI, Arial" font-size="10" fill="#22c55e" text-anchor="middle">Documents</text>

  <rect x="740" y="285" width="130" height="60" rx="6" fill="white" stroke="#4ade80"/>
  <text x="805" y="310" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">Search</text>
  <text x="805" y="328" font-family="Segoe UI, Arial" font-size="10" fill="#22c55e" text-anchor="middle">Indexes</text>

  <rect x="890" y="285" width="130" height="60" rx="6" fill="white" stroke="#4ade80"/>
  <text x="955" y="310" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#166534" text-anchor="middle">Key Vault</text>
  <text x="955" y="328" font-family="Segoe UI, Arial" font-size="10" fill="#22c55e" text-anchor="middle">Secrets</text>

  <!-- AI Foundry Project B -->
  <rect x="590" y="360" width="430" height="65" rx="6" fill="#f3e8ff" stroke="#7c3aed" stroke-width="2"/>
  <text x="805" y="385" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#6b21a8" text-anchor="middle">AI Foundry Project: sdpr-chatbot</text>
  <text x="805" y="405" font-family="Segoe UI, Arial" font-size="10" fill="#7c3aed" text-anchor="middle">API endpoint | Prompt Flows | Connections to shared services ↓</text>
  <rect x="940" y="365" width="70" height="18" rx="3" fill="#7c3aed"/>
  <text x="975" y="377" font-family="Segoe UI, Arial" font-size="8" font-weight="bold" fill="white" text-anchor="middle">DEDICATED</text>

  <!-- Simple arrow showing flow to shared services -->
  <line x1="550" y1="450" x2="550" y2="510" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="570" y="485" font-family="Segoe UI, Arial" font-size="10" fill="#64748b">access</text>

  <!-- ==================== SHARED AI FOUNDRY HUB ==================== -->
  <rect x="50" y="520" width="480" height="130" rx="10" fill="#f3e8ff" stroke="#7c3aed" stroke-width="2" filter="url(#shadow)"/>
  <text x="290" y="545" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#6b21a8" text-anchor="middle">Shared AI Foundry Hub</text>
  <rect x="450" y="525" width="70" height="20" rx="3" fill="#7c3aed"/>
  <text x="485" y="539" font-family="Segoe UI, Arial" font-size="9" font-weight="bold" fill="white" text-anchor="middle">SHARED</text>

  <!-- AI Foundry services -->
  <rect x="70" y="560" width="130" height="45" rx="5" fill="white" stroke="#a855f7"/>
  <text x="135" y="580" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#6b21a8" text-anchor="middle">GPT-4 / GPT-4o</text>
  <text x="135" y="595" font-family="Segoe UI, Arial" font-size="9" fill="#7c3aed" text-anchor="middle">Chat models</text>

  <rect x="220" y="560" width="130" height="45" rx="5" fill="white" stroke="#a855f7"/>
  <text x="285" y="580" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#6b21a8" text-anchor="middle">Embeddings</text>
  <text x="285" y="595" font-family="Segoe UI, Arial" font-size="9" fill="#7c3aed" text-anchor="middle">text-embedding-3</text>

  <rect x="370" y="560" width="140" height="45" rx="5" fill="white" stroke="#a855f7"/>
  <text x="440" y="580" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#6b21a8" text-anchor="middle">Prompt Flow</text>
  <text x="440" y="595" font-family="Segoe UI, Arial" font-size="9" fill="#7c3aed" text-anchor="middle">Compute runtime</text>

  <text x="290" y="635" font-family="Segoe UI, Arial" font-size="10" fill="#7c3aed" text-anchor="middle">Accessed via AI Foundry Project</text>

  <!-- ==================== OTHER SHARED AZURE SERVICES ==================== -->
  <rect x="570" y="520" width="480" height="130" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
  <text x="810" y="545" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#92400e" text-anchor="middle">Other Shared Azure Services</text>
  <rect x="970" y="525" width="70" height="20" rx="3" fill="#f59e0b"/>
  <text x="1005" y="539" font-family="Segoe UI, Arial" font-size="9" font-weight="bold" fill="white" text-anchor="middle">SHARED</text>

  <!-- Other Azure services -->
  <rect x="590" y="560" width="140" height="45" rx="5" fill="white" stroke="#fbbf24"/>
  <text x="660" y="580" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#92400e" text-anchor="middle">Doc Intelligence</text>
  <text x="660" y="595" font-family="Segoe UI, Arial" font-size="9" fill="#b45309" text-anchor="middle">OCR, extraction</text>

  <rect x="750" y="560" width="140" height="45" rx="5" fill="white" stroke="#fbbf24"/>
  <text x="820" y="580" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#92400e" text-anchor="middle">AKS Cluster</text>
  <text x="820" y="595" font-family="Segoe UI, Arial" font-size="9" fill="#b45309" text-anchor="middle">Compute</text>

  <rect x="910" y="560" width="120" height="45" rx="5" fill="white" stroke="#fbbf24"/>
  <text x="970" y="580" font-family="Segoe UI, Arial" font-size="10" font-weight="bold" fill="#92400e" text-anchor="middle">Vision / Speech</text>
  <text x="970" y="595" font-family="Segoe UI, Arial" font-size="9" fill="#b45309" text-anchor="middle">Other AI services</text>

  <text x="810" y="635" font-family="Segoe UI, Arial" font-size="10" fill="#b45309" text-anchor="middle">Accessed via APIM / Private Endpoints</text>

  <!-- ==================== OPTIONAL: ALL THROUGH AI FOUNDRY ==================== -->
  <rect x="50" y="660" width="1000" height="50" rx="8" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1" stroke-dasharray="5,3"/>
  <text x="80" y="690" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="#0369a1">OPTIONAL:</text>
  <text x="160" y="690" font-family="Segoe UI, Arial" font-size="11" fill="#0284c7">AI Foundry supports "connections" to Doc Intelligence, Search, Storage → All access can route through AI Foundry Projects for unified tracking</text>

  <!-- ==================== TERRAFORM + AVM ==================== -->
  <rect x="50" y="720" width="1000" height="90" rx="10" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" filter="url(#shadow)"/>
  <text x="550" y="745" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#166534" text-anchor="middle">Terraform + AVM Deploys Everything</text>
  <text x="550" y="770" font-family="Segoe UI, Arial" font-size="11" fill="#15803d" text-anchor="middle">One module call creates: Resource Group + AI Foundry Project + Storage + Search + Key Vault + APIM Subscription + Connections</text>
  <text x="550" y="790" font-family="Segoe UI, Arial" font-size="10" fill="#15803d" text-anchor="middle">AVM: avm-res-storage-storageaccount | avm-res-search-searchservice | avm-res-keyvault-vault | avm-res-machinelearningservices-workspace</text>

  <!-- ==================== COST TRACKING ==================== -->
  <rect x="50" y="830" width="1000" height="90" rx="10" fill="#fce7f3" stroke="#ec4899" stroke-width="2" filter="url(#shadow)"/>
  <text x="550" y="855" font-family="Segoe UI, Arial" font-size="14" font-weight="bold" fill="#be185d" text-anchor="middle">Cost Tracking</text>

  <rect x="80" y="870" width="280" height="35" rx="4" fill="#22c55e"/>
  <text x="220" y="892" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="white" text-anchor="middle">DIRECT: Storage, Search, KV (by RG)</text>

  <rect x="400" y="870" width="300" height="35" rx="4" fill="#7c3aed"/>
  <text x="550" y="892" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="white" text-anchor="middle">AI METRICS: Tokens, pages (per project)</text>

  <rect x="740" y="870" width="280" height="35" rx="4" fill="#f59e0b"/>
  <text x="880" y="892" font-family="Segoe UI, Arial" font-size="11" font-weight="bold" fill="white" text-anchor="middle">SPLIT: APIM, Gateway, Firewall</text>

  <!-- Footer -->
  <rect x="0" y="955" width="1100" height="45" fill="#1e293b"/>
  <text x="550" y="982" font-family="Segoe UI, Arial" font-size="11" fill="#94a3b8" text-anchor="middle">Each project: Dedicated RG + Dedicated AI Foundry Project → Access to all shared AI services (GPT, Doc Intel, AKS, etc.)</text>

</svg>
